{% extends "two_column_page_wideleft.html" %}


  {% block page_top_menu %}
    
    {% include 'pagemenu.html' %}
    
    <div class="page-header">   
      {% if expform.instance.abbrev %}
        <h3>Edit Experiment <strong>{{expform.instance.abbrev}}</strong></h3>
      {% else %}
        <h3>Edit New Experiment</h3>
      {% endif %}
    </div>
    
    {% if expform.errors%} 
      <div class="row">
        <div class="offset2 span8">
            <div class="alert alert-error ">
              {% if expform.non_field_errors %}
                <p>{{ expform.non_field_errors }}</p>
              {% else %}
                <p> Please correct the marked fields</p>
              {% endif %}
            </div>
        </div>
      </div>
    {% endif %}
  
  {% endblock %}


  {% block page_column_one %}

    <div class="row">
      <form action="{{ urls.expedit }}" method="POST" class="form-horizontal">
        {% csrf_token %}
        
            <div class="span2">
              {% if expform.abbrev.errors %}
                {% for error in expform.abbrev.errors %} 
                    <p class="error"> 
                        {{ error }}
                    </p>
                {% endfor %} 
              {% endif %}
              <p>
                <label for="abbrev"{% if expform.name.errors %} class="error" {% endif %}>Abbreviation</label>
              </p>
            </div>
            <div class="span4">
              <p>{{ expform.abbrev }}</p>
            </div>
            
            <div class="span2">
              {% if expform.title.errors %}
                {% for error in expform.title.errors %} 
                    <p class="error"> 
                      {{ error }}
                    </p>
                {% endfor %} 
              {% endif %}
              <p>
                <label for="title"{% if expform.title.errors %} class="error" {% endif %}>Title</label>
              </p>
            </div>
            <div class="span4">
              <p>{{ expform.title }}</p>
            </div>
            
            <div class="span2">
              {% if expform.author.errors %}
                {% for error in expform.author.errors %} 
                    <p class="error"> 
                      {{ error }}
                    </p>
                {% endfor %} 
              {% endif %}
              <p>
                <label for="author"{% if expform.author.errors %} class="error" {% endif %}>Author</label>
              </p>
            </div>
            <div class="span4">
              <p>{{ expform.author }}</p>
            </div>
            
            <div class="span2">
              {% if expform.project.errors %}
                {% for error in expform.project.errors %} 
                    <p class="error"> 
                      {{ error }}
                    </p>
                {% endfor %} 
              {% endif %}
              <p>
                <label for="project"{% if expform.project.errors %} class="error" {% endif %}>Project</label>
              </p>
            </div>
            <div class="span4">
              <p>{{ expform.project }}</p>
            </div>
            
            <div class="span2">
              {% if expform.description.errors %}
                {% for error in expform.description.errors %} 
                    <p class="error"> 
                      {{ error }}
                    </p>
                {% endfor %} 
              {% endif %}
              <p>
                <label for="description"{% if expform.description.errors %} class="error" {% endif %}>Description</label>
              </p>
            </div>
            <div class="span4">
              <p>{{ expform.description }}</p>
            </div>
            
            <div class="span2">
              {% if expform.rationale.errors %}
                {% for error in expform.rationale.errors %} 
                    <p class="error"> 
                      {{ error }}
                    </p>
                {% endfor %} 
              {% endif %}
              <p>
                <label for="rationale"{% if expform.rationale.errors %} class="error" {% endif %}>Rationale</label>
              </p>
            </div>
            <div class="span4">
              <p>{{ expform.rationale }}</p>
            </div>
            
            <div class="span2">
              {% if expform.control.errors %}
                {% for error in expform.control.errors %} 
                    <p class="error"> 
                      {{ error }}
                    </p>
                {% endfor %} 
              {% endif %}
              <p>
                <label for="control"{% if expform.control.errors %} class="error" {% endif %}>Control?</label>
              </p>
            </div>
            <div class="span4">
              <p>{{ expform.control }}</p>
            </div>
            
            <div class="span2">
              {% if expform.requirements.errors %}
                {% for error in expform.requirements.errors %} 
                    <p class="error"> 
                      {{ error }}
                    </p>
                {% endfor %} 
              {% endif %}
              <p>
                <label for="reqs"{% if expform.requirements.errors %} class="error" {% endif %}>Associated requirements</label>
              </p>
            </div>
            <div class="span4">
              <p>{{ expform.requirements }}
              <a class="btn" data-toggle="modal" href="#myModal" >Add new requirement</a>
              </>
            </div> 
            
        </div>
{% endblock %} 


{% block page_column_two %}
	   
	  <div class="row">
	    <button type="submit" name="expform" class="btn btn-success btn-block">Save changes</button>
	    <button name="cancel" type="submit" value="Cancel" class="btn btn-block">Cancel</button>
	  </div>
  
  </form>
  

  <div class="modal hide" id="myModal">
    <div class="modal-header">
      <a class="close" data-dismiss="modal">Ã—</a>
      <h3>Add new requirement</h3>
    </div>
    <div class="modal-body">
      <form class="ajax" method="POST" action="{{ urls.reqedit }}">
        <fieldset>
            <div class="control-group">
                <label class="control-label" for="name">Name</label>
                <div class="controls">
                    {{ reqform.name }}
                </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="docid">Doc ID</label>
                <div class="controls">
                  {{ reqform.docid }}
                </div>
            </div> 
            <div class="control-group">
                <label class="control-label" for="reqtype">Requirement Type</label>
                <div class="controls">
                    {{ reqform.reqtype }}
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="description">Description</label>
                <div class="controls">
                    {{ reqform.description }}
                </div>
            </div>
	        <div class="actions">
	            <input class="btn btn-inverse" name="reqform" type="submit" value="Submit" />
	            <a class="btn close-dialog" href="#">Cancel</a>
	        </div>
        </fieldset>
      </form>
    </div>
</div>
  
 
{% endblock %}
